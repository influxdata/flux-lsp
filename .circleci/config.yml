version: 2

jobs:
  build:
    docker:
      - image: circleci/rust:1.39-stretch
    steps:
    - checkout
    - run: sudo apt-get install ragel llvm clang libclang-dev
    - run: cargo build --verbose
    - run: rustup component add clippy
    - run: cargo clippy --all -- -D warnings
    - run: cargo test --verbose
